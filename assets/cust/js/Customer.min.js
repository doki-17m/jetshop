function errFormCus(e){""!=e.error_cus_code?(errCRCc.html(e.error_cus_code),fillCRCc.addClass(isInvalid)):(errCRCc.html(""),fillCRCc.removeClass(isInvalid)),""!=e.error_cus_name?(errCRName.html(e.error_cus_name),fillCRName.addClass(isInvalid)):(errCRName.html(""),fillCRName.removeClass(isInvalid)),""!=e.error_cus_email?(errCREmail.html(e.error_cus_email),fillCREmail.addClass(isInvalid)):(errCREmail.html(""),fillCREmail.removeClass(isInvalid)),""!=e.error_cus_address?(errCRAddress.html(e.error_cus_address),fillCRAddress.addClass(isInvalid)):(errCRAddress.html(""),fillCRAddress.removeClass(isInvalid)),""!=e.error_cus_phone?(errCRPhone.html(e.error_cus_phone),fillCRPhone.addClass(isInvalid)):(errCRPhone.html(""),fillCRPhone.removeClass(isInvalid)),""!=e.error_cus_province?errCRProv.html(e.error_cus_province):errCRProv.html(""),""!=e.error_cus_city?errCRCity.html(e.error_cus_city):errCRCity.html("")}function clearCus(){cusForm[0].reset(),fillCRGre.val(null).change(),fillCRSales.val(null).change(),errCRCc.html(""),errCRName.html(""),errCREmail.html(""),errCRAddress.html(""),errCRPhone.html(""),errCRProv.html(""),errCRCity.html(""),fillCRProv.val(null).change(),fillCRCity.val(null).change(),fillCRCity.empty(),fillCRCc.removeClass(isInvalid),fillCRName.removeClass(isInvalid),fillCREmail.removeClass(isInvalid),fillCRAddress.removeClass(isInvalid),fillCRPhone.removeClass(isInvalid)}function chkdCus(){fillCRCc.prop("readonly",!0),fillCRGre.prop("disabled",!0),fillCRName.prop("readonly",!0),fillCREmail.prop("readonly",!0),fillCRProv.prop("disabled",!0),fillCRCity.prop("disabled",!0),fillCRAddress.prop("readonly",!0),fillCRPhone.prop("readonly",!0),fillCRPhone2.prop("readonly",!0),fillCRSales.prop("disabled",!0),fillCRDesc.prop("readonly",!0)}function unchkdCus(){fillCRCc.prop("readonly",!1),fillCRGre.prop("disabled",!1),fillCRName.prop("readonly",!1),fillCREmail.prop("readonly",!1),fillCRProv.prop("disabled",!1),fillCRCity.prop("disabled",!1),fillCRAddress.prop("readonly",!1),fillCRPhone.prop("readonly",!1),fillCRPhone2.prop("readonly",!1),fillCRSales.prop("disabled",!1),fillCRDesc.prop("readonly",!1)}function fSaleShowHide(){""!==fillCRFSale[0].value?(classCRFSale.show(),fillCRFSale.prop("readonly",!0)):(classCRFSale.hide(),fillCRFSale.prop("readonly",!1))}function cusGreeting(){url=CUST_URL+GREETING+"/showGreeting",$.getJSON(url,function(e){fillCRGre.append('<option selected="selected" value="">-- Choose One --</option>'),$.each(e,function(e,l){var r=l.m_greeting_id,i=l.name;fillCRGre.append('<option value="'+r+'">'+i+"</option>")})})}function cusSales(){url=CUST_URL+USER+"/showSales",$.getJSON(url,function(e){fillCRSales.append('<option selected="selected" value="">-- Choose One --</option>'),$.each(e,function(e,l){var r=l.sys_user_id,i=l.value;fillCRSales.append('<option value="'+r+'">'+i+"</option>")})})}function cusProv(){url=CUST_URL+PROVINCE+"/showProvince",$.getJSON(url,function(e){fillCRProv.append('<option selected="selected" value="">-- Choose One --</option>'),$.each(e,function(e,l){var r=l.m_province_id,i=l.name;fillCRProv.append('<option value="'+r+'">'+i+"</option>")})})}function getCity(){fillCRProv.change(function(e){e.preventDefault();let l=$(this).val(),r=hideCRCity.val();url=CUST_URL+CITY+"/showCity",$.ajax({url:url,type:"POST",data:{id:l},dataType:"JSON",success:function(e){fillCRCity.empty(),fillCRCity.append('<option selected="selected" value="">-- Choose One --</option>'),$.each(e,function(e,l){var i=l.m_city_id,a=l.type,o=a+" "+l.name;r==l.m_city_id?fillCRCity.append('<option selected="selected" value="'+i+'">'+o+"</option>").change():fillCRCity.append('<option value="'+i+'">'+o+"</option>")})}})})}const fillCRCc=$("[name = cus_code]"),fillCRName=$("[name = cus_name]"),fillCRGre=$("[name = cus_greeting]"),fillCREmail=$("[name = cus_email]"),fillCRAddress=$("[name = cus_address]"),fillCRPhone=$("[name = cus_phone]"),fillCRPhone2=$("[name = cus_phone2]"),fillCRSales=$("[name = cus_sales]"),fillCRFSale=$("[name = cus_firstsale]"),fillCRProv=$("[name = cus_province]"),fillCRCity=$("[name = cus_city]"),fillCRDesc=$("[name = cus_desc]"),errCRCc=$("#error_cus_code"),errCRName=$("#error_cus_name"),errCREmail=$("#error_cus_email"),errCRAddress=$("#error_cus_address"),errCRPhone=$("#error_cus_phone"),errCRProv=$("#error_cus_province"),errCRCity=$("#error_cus_city"),hideCRCity=$("[name = hidden_city]"),classCRFSale=$(".cus_firstsale");cusGreeting(),cusProv(),getCity(),cusSales(),btnNewCus.click(function(){openModalForm(),Largemodal(),Scrollmodal(),modalTitle.text("New Customer"),clearCus(),cusActive.prop("checked",!0),formID=cusForm[0].id,isActive(formID),fSaleShowHide(),setSave="add"}),_tableCus.on("click","td:not(:last-child)",function(e){e.preventDefault();const l=cusForm[0].id,r=_tableCus.row(this).data();ID=r[0];let i=r[3];openModalForm(),Largemodal(),Scrollmodal(),modalTitle.html("Customer : "+i),isActive(l),fSaleShowHide(),clearCus(),url=SITE_URL+SHOW+ID,setSave="update",$.ajax({url:url,type:"GET",dataType:"JSON",success:function(e){hideCRCity.val(e.city_id),fillCRCc.val(e.value),fillCRGre.val(e.m_greeting_id).change(),fillCRName.val(e.name),fillCREmail.val(e.email),fillCRAddress.val(e.address),fillCRPhone.val(e.phone),fillCRPhone2.val(e.phone2),fillCRProv.val(e.province_id).change(),fillCRCity.val(e.city_id).change(),fillCRSales.val(e.salesrep_id).change(),fillCRFSale.val(e.firstsale),fillCRDesc.val(e.description),e.isactive==active?(cusActive.prop("checked",!0),readonly(l,!1)):(cusActive.prop("checked",!1),readonly(l,!0))}})});